<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.su.dao.VisitorDao">

    <select id="totalcount"  resultType="Integer">
        select count(*) from d_visitor
        <where>
            <if test="v_name !=null and v_name!=''">
                v_name like '%${v_name}%'
            </if>

            <if test="v_phone !=null and v_phone!=''">
                v_phone like '%${v_phone}%'
            </if>

        </where>

    </select>


    <select id="getVisitor" resultType="Visitor">
        select * from d_visitor
        <where>
            <if test="v_name !=null and v_name!=''">
                v_name like '%${v_name}%'
            </if>

            <if test="v_phone !=null and v_phone!=''">
                v_phone like '%${v_phone}%'
            </if>

        </where>
        order by v_id asc
        limit #{pageindex},#{pagesize}

    </select>

    <insert id="addVisitor" parameterType="Visitor">
        insert into d_visitor(v_name,v_phone,v_dormitoryid,v_dormbuilding,create_time)
        values (#{v_name},#{v_phone},#{v_dormitoryid},#{v_dormbuilding},now())
    </insert>



    <select id="getAll" resultType="Visitor">
        select * from d_visitor
    </select>

</mapper>
